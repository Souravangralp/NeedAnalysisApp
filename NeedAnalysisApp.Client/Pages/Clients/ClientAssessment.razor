@page "/client-assessment"

<MudContainer Class="mt-16 px-8" MaxWidth="MaxWidth.False">
    <MudGrid>
        <MudItem xs="12">
            <MudPaper Elevation="2" Class="p-3">
                <MudText Typo="Typo.h6">Assessments</MudText>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" Class="mt-2 p-3">

            <MudTabs @ref=MudTabs Elevation="2" ApplyEffectsToContainer="true" Rounded="true" Centered="true" Class="my-6" PanelClass="pa-6" Color="Color.Dark">

                <MudTabPanel @ref=AllAssessmentsTab Text="All" Icon="@Icons.Material.Filled.Assessment" BadgeData="AllAssessments.Count" BadgeColor="Color.Info">
                    <MudItem Class="mt-4">
                        <MudGrid Spacing="20" Justify="Justify.Center">
                            @foreach (var assessment in AllAssessments)
                            {
                                <MudItem xs="3">
                                    <MudCard>
                                        <MudCardHeader>
                                            <CardHeaderContent>
                                                <MudText Typo="Typo.h6">@assessment.Name</MudText>
                                            </CardHeaderContent>
                                        </MudCardHeader>
                                        <MudCardContent>
                                            <MudText>@assessment.Title</MudText>
                                            <MudText Typo="Typo.body2">@assessment.Description</MudText>
                                        </MudCardContent>
                                        <MudCardActions>
                                            <MudIconButton Icon="@Icons.Material.Filled.AddBox" Color="Color.Primary" OnClick="() => OnAddAssessmentAsync(assessment)" />
                                        </MudCardActions>
                                    </MudCard>
                                </MudItem>
                            }
                        </MudGrid>
                    </MudItem>

                </MudTabPanel>

                <MudTabPanel @ref=MyAssessmentsTab Text="Mine" Icon="@Icons.Material.Filled.SupervisedUserCircle" BadgeData="MyAssessments?.Count ?? 0">
                    <MudItem Class="mt-4">
                        <MudGrid Spacing="20" Justify="Justify.Center">
                            @foreach (var assessment in MyAssessments)
                            {
                                <MudItem xs="3">
                                    <MudCard>
                                        <MudCardHeader>
                                            <CardHeaderContent>
                                                <MudText Typo="Typo.h6">@assessment.Name</MudText>
                                            </CardHeaderContent>
                                        </MudCardHeader>
                                        <MudCardContent>
                                            <MudText>@assessment.Title</MudText>
                                            <MudText Typo="Typo.body2">@assessment.Description</MudText>
                                        </MudCardContent>
                                        <MudCardActions>
                                            <MudIconButton Icon="@Icons.Material.Filled.Start" Color="Color.Primary" OnClick="() => OnPerformAssessmentClickedAsync(assessment.UniqueId)" />
                                        </MudCardActions>
                                    </MudCard>
                                </MudItem>
                            }
                        </MudGrid>
                    </MudItem>

                </MudTabPanel>

            </MudTabs>

        </MudItem>
    </MudGrid>
</MudContainer>