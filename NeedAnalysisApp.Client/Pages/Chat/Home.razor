@page "/chat"

<MudGrid>
    <MudItem xs="4">
        <MudPaper Elevation="2" Style="height: 500px; overflow-y: auto;">
            <MudList T="string">
                @foreach (var user in Users)
                {
                    <MudListItem OnClick="() => OpenChat(user.Id)">
                        <AvatarContent>
                            <MudBadge Dot="@(user.IsOnline ? true : false)" Color="@(user.IsOnline ? Color.Success : Color.Error)" Class="mx-6 my-4">
                                <MudAvatar>
                                    <MudImage Src="@user.ProfilePictureUrl" />
                                </MudAvatar>
                            </MudBadge>
                        </AvatarContent>
                        <ChildContent>
                            @user.FirstName
                        </ChildContent>
                    </MudListItem>
                    @if (user.UnreadMessagesCount > 0)
                    {
                        <MudBadge Color="Color.Error" Class="ms-2">
                            @user.UnreadMessagesCount
                        </MudBadge>
                    }
                }
            </MudList>
        </MudPaper>
    </MudItem>

    <MudItem xs="8">
        <MudPaper Elevation="2">
            <DynamicComponent Type="typeof(Panel)" Parameters="parameters" />
        </MudPaper>
    </MudItem>
</MudGrid>